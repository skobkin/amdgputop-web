(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var ae,m,wt,Y,Ke,Et,kt,$t,Ie,$e,Ne,Nt,ue={},Ct=[],vr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_e=Array.isArray;function F(e,t){for(var r in t)e[r]=t[r];return e}function Re(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function H(e,t,r){var n,o,i,c={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:c[i]=t[i];if(arguments.length>2&&(c.children=arguments.length>3?ae.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)c[i]===void 0&&(c[i]=e.defaultProps[i]);return se(e,c,n,o,null)}function se(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++wt,__i:-1,__u:0};return o==null&&m.vnode!=null&&m.vnode(i),i}function Pt(){return{current:null}}function A(e){return e.children}function G(e,t){this.props=e,this.context=t}function te(e,t){if(t==null)return e.__?te(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?te(e):null}function Tt(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Tt(e)}}function Ce(e){(!e.__d&&(e.__d=!0)&&Y.push(e)&&!he.__r++||Ke!=m.debounceRendering)&&((Ke=m.debounceRendering)||Et)(he)}function he(){for(var e,t,r,n,o,i,c,l=1;Y.length;)Y.length>l&&Y.sort(kt),e=Y.shift(),l=Y.length,e.__d&&(r=void 0,n=void 0,o=(n=(t=e).__v).__e,i=[],c=[],t.__P&&((r=F({},n)).__v=n.__v+1,m.vnode&&m.vnode(r),Oe(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[o]:null,i,o??te(n),!!(32&n.__u),c),r.__v=n.__v,r.__.__k[r.__i]=r,It(i,r,c),n.__e=n.__=null,r.__e!=o&&Tt(r)));he.__r=0}function Ut(e,t,r,n,o,i,c,l,_,u,p){var s,h,d,y,k,S,g,v=n&&n.__k||Ct,$=t.length;for(_=yr(r,t,v,_,$),s=0;s<$;s++)(d=r.__k[s])!=null&&(h=d.__i==-1?ue:v[d.__i]||ue,d.__i=s,S=Oe(e,d,h,o,i,c,l,_,u,p),y=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&Me(h.ref,null,d),p.push(d.ref,d.__c||y,d)),k==null&&y!=null&&(k=y),(g=!!(4&d.__u))||h.__k===d.__k?_=xt(d,_,e,g):typeof d.type=="function"&&S!==void 0?_=S:y&&(_=y.nextSibling),d.__u&=-7);return r.__e=k,_}function yr(e,t,r,n,o){var i,c,l,_,u,p=r.length,s=p,h=0;for(e.__k=new Array(o),i=0;i<o;i++)(c=t[i])!=null&&typeof c!="boolean"&&typeof c!="function"?(_=i+h,(c=e.__k[i]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?se(null,c,null,null,null):_e(c)?se(A,{children:c},null,null,null):c.constructor==null&&c.__b>0?se(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,l=null,(u=c.__i=gr(c,r,_,s))!=-1&&(s--,(l=r[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(o>p?h--:o<p&&h++),typeof c.type!="function"&&(c.__u|=4)):u!=_&&(u==_-1?h--:u==_+1?h++:(u>_?h--:h++,c.__u|=4))):e.__k[i]=null;if(s)for(i=0;i<p;i++)(l=r[i])!=null&&!(2&l.__u)&&(l.__e==n&&(n=te(l)),Ot(l,l));return n}function xt(e,t,r,n){var o,i;if(typeof e.type=="function"){for(o=e.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=e,t=xt(o[i],t,r,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=te(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function W(e,t){return t=t||[],e==null||typeof e=="boolean"||(_e(e)?e.some(function(r){W(r,t)}):t.push(e)),t}function gr(e,t,r,n){var o,i,c,l=e.key,_=e.type,u=t[r],p=u!=null&&(2&u.__u)==0;if(u===null&&e.key==null||p&&l==u.key&&_==u.type)return r;if(n>(p?1:0)){for(o=r-1,i=r+1;o>=0||i<t.length;)if((u=t[c=o>=0?o--:i++])!=null&&!(2&u.__u)&&l==u.key&&_==u.type)return c}return-1}function Ze(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||vr.test(t)?r:r+"px"}function de(e,t,r,n,o){var i,c;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Ze(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||Ze(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace($t,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=Ie,e.addEventListener(t,i?Ne:$e,i)):e.removeEventListener(t,i?Ne:$e,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Qe(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Ie++;else if(t.t<r.u)return;return r(m.event?m.event(t):t)}}}function Oe(e,t,r,n,o,i,c,l,_,u){var p,s,h,d,y,k,S,g,v,$,R,Z,P,x,B,z,Q,T=t.type;if(t.constructor!=null)return null;128&r.__u&&(_=!!(32&r.__u),i=[l=t.__e=r.__e]),(p=m.__b)&&p(t);e:if(typeof T=="function")try{if(g=t.props,v="prototype"in T&&T.prototype.render,$=(p=T.contextType)&&n[p.__c],R=p?$?$.props.value:p.__:n,r.__c?S=(s=t.__c=r.__c).__=s.__E:(v?t.__c=s=new T(g,R):(t.__c=s=new G(g,R),s.constructor=T,s.render=Sr),$&&$.sub(s),s.props=g,s.state||(s.state={}),s.context=R,s.__n=n,h=s.__d=!0,s.__h=[],s._sb=[]),v&&s.__s==null&&(s.__s=s.state),v&&T.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=F({},s.__s)),F(s.__s,T.getDerivedStateFromProps(g,s.__s))),d=s.props,y=s.state,s.__v=t,h)v&&T.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),v&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(v&&T.getDerivedStateFromProps==null&&g!==d&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(g,R),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(g,s.__s,R)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(s.props=g,s.state=s.__s,s.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(O){O&&(O.__=t)}),Z=0;Z<s._sb.length;Z++)s.__h.push(s._sb[Z]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(g,s.__s,R),v&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(d,y,k)})}if(s.context=R,s.props=g,s.__P=e,s.__e=!1,P=m.__r,x=0,v){for(s.state=s.__s,s.__d=!1,P&&P(t),p=s.render(s.props,s.state,s.context),B=0;B<s._sb.length;B++)s.__h.push(s._sb[B]);s._sb=[]}else do s.__d=!1,P&&P(t),p=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++x<25);s.state=s.__s,s.getChildContext!=null&&(n=F(F({},n),s.getChildContext())),v&&!h&&s.getSnapshotBeforeUpdate!=null&&(k=s.getSnapshotBeforeUpdate(d,y)),z=p,p!=null&&p.type===A&&p.key==null&&(z=Rt(p.props.children)),l=Ut(e,_e(z)?z:[z],t,r,n,o,i,c,l,_,u),s.base=t.__e,t.__u&=-161,s.__h.length&&c.push(s),S&&(s.__E=s.__=null)}catch(O){if(t.__v=null,_||i!=null)if(O.then){for(t.__u|=_?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;i[i.indexOf(l)]=null,t.__e=l}else{for(Q=i.length;Q--;)Re(i[Q]);Pe(t)}else t.__e=r.__e,t.__k=r.__k,O.then||Pe(t);m.__e(O,t,r)}else i==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):l=t.__e=br(r.__e,t,r,n,o,i,c,_,u);return(p=m.diffed)&&p(t),128&t.__u?void 0:l}function Pe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Pe)}function It(e,t,r){for(var n=0;n<r.length;n++)Me(r[n],r[++n],r[++n]);m.__c&&m.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){m.__e(i,o.__v)}})}function Rt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:_e(e)?e.map(Rt):F({},e)}function br(e,t,r,n,o,i,c,l,_){var u,p,s,h,d,y,k,S=r.props,g=t.props,v=t.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((d=i[u])&&"setAttribute"in d==!!v&&(v?d.localName==v:d.nodeType==3)){e=d,i[u]=null;break}}if(e==null){if(v==null)return document.createTextNode(g);e=document.createElementNS(o,v,g.is&&g),l&&(m.__m&&m.__m(t,i),l=!1),i=null}if(v==null)S===g||l&&e.data==g||(e.data=g);else{if(i=i&&ae.call(e.childNodes),S=r.props||ue,!l&&i!=null)for(S={},u=0;u<e.attributes.length;u++)S[(d=e.attributes[u]).name]=d.value;for(u in S)if(d=S[u],u!="children"){if(u=="dangerouslySetInnerHTML")s=d;else if(!(u in g)){if(u=="value"&&"defaultValue"in g||u=="checked"&&"defaultChecked"in g)continue;de(e,u,null,d,o)}}for(u in g)d=g[u],u=="children"?h=d:u=="dangerouslySetInnerHTML"?p=d:u=="value"?y=d:u=="checked"?k=d:l&&typeof d!="function"||S[u]===d||de(e,u,d,S[u],o);if(p)l||s&&(p.__html==s.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(s&&(e.innerHTML=""),Ut(t.type=="template"?e.content:e,_e(h)?h:[h],t,r,n,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,c,i?i[0]:r.__k&&te(r,0),l,_),i!=null)for(u=i.length;u--;)Re(i[u]);l||(u="value",v=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[u]||v=="progress"&&!y||v=="option"&&y!=S[u])&&de(e,u,y,S[u],o),u="checked",k!=null&&k!=e[u]&&de(e,u,k,S[u],o))}return e}function Me(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(o){m.__e(o,r)}}function Ot(e,t,r){var n,o;if(m.unmount&&m.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||Me(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){m.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&Ot(n[o],t,r||typeof e.type!="function");r||Re(e.__e),e.__c=e.__=e.__e=void 0}function Sr(e,t,r){return this.constructor(e,r)}function re(e,t,r){var n,o,i,c;t==document&&(t=document.documentElement),m.__&&m.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],c=[],Oe(t,e=(!n&&r||t).__k=H(A,null,[e]),o||ue,ue,t.namespaceURI,!n&&r?[r]:o?null:t.firstChild?ae.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,c),It(i,e,c)}function Mt(e,t){re(e,t,Mt)}function wr(e,t,r){var n,o,i,c,l=F({},e.props);for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?o=t[i]:l[i]=t[i]===void 0&&c!=null?c[i]:t[i];return arguments.length>2&&(l.children=arguments.length>3?ae.call(arguments,2):r),se(e.type,l,n||e.key,o||e.ref,null)}function Dt(e){function t(r){var n,o;return this.getChildContext||(n=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&n.forEach(function(c){c.__e=!0,Ce(c)})},this.sub=function(i){n.add(i);var c=i.componentWillUnmount;i.componentWillUnmount=function(){n&&n.delete(i),c&&c.call(i)}}),r.children}return t.__c="__cC"+Nt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,n){return r.children(n)}).contextType=t,t}ae=Ct.slice,m={__e:function(e,t,r,n){for(var o,i,c;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),c=o.__d),c)return o.__E=o}catch(l){e=l}throw e}},wt=0,G.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},r),this.props)),e&&F(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ce(this))},G.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ce(this))},G.prototype.render=A,Y=[],Et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,kt=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,$t=/(PointerCapture)$|Capture$/i,Ie=0,$e=Qe(!1),Ne=Qe(!0),Nt=0;var Er=0;function a(e,t,r,n,o,i){t||(t={});var c,l,_=t;if("ref"in _)for(l in _={},t)l=="ref"?c=t[l]:_[l]=t[l];var u={type:e,props:_,key:r,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Er,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(c=e.defaultProps))for(l in c)_[l]===void 0&&(_[l]=c[l]);return m.vnode&&m.vnode(u),u}var j,b,we,Xe,ne=0,Gt=[],w=m,et=w.__b,tt=w.__r,rt=w.diffed,nt=w.__c,ot=w.unmount,it=w.__;function K(e,t){w.__h&&w.__h(b,e,ne||t),ne=0;var r=b.__H||(b.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function ie(e){return ne=1,ve(At,e)}function ve(e,t,r){var n=K(j++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):At(void 0,t),function(l){var _=n.__N?n.__N[0]:n.__[0],u=n.t(_,l);_!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=b,!b.__f)){var o=function(l,_,u){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!i||i.call(this,l,_,u);var s=n.__c.props!==l;return p.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(s=!0)}}),i&&i.call(this,l,_,u)||s};b.__f=!0;var i=b.shouldComponentUpdate,c=b.componentWillUpdate;b.componentWillUpdate=function(l,_,u){if(this.__e){var p=i;i=void 0,o(l,_,u),i=p}c&&c.call(this,l,_,u)},b.shouldComponentUpdate=o}return n.__N||n.__}function D(e,t){var r=K(j++,3);!w.__s&&Fe(r.__H,t)&&(r.__=e,r.u=t,b.__H.__h.push(r))}function ce(e,t){var r=K(j++,4);!w.__s&&Fe(r.__H,t)&&(r.__=e,r.u=t,b.__h.push(r))}function V(e){return ne=5,q(function(){return{current:e}},[])}function De(e,t,r){ne=6,ce(function(){if(typeof e=="function"){var n=e(t());return function(){e(null),n&&typeof n=="function"&&n()}}if(e)return e.current=t(),function(){return e.current=null}},r==null?r:r.concat(e))}function q(e,t){var r=K(j++,7);return Fe(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function ye(e,t){return ne=8,q(function(){return e},t)}function Ge(e){var t=b.context[e.__c],r=K(j++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(b)),t.props.value):e.__}function Ae(e,t){w.useDebugValue&&w.useDebugValue(t?t(e):e)}function kr(e){var t=K(j++,10),r=ie();return t.__=e,b.componentDidCatch||(b.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Le(){var e=K(j++,11);if(!e.__){for(var t=b.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function $r(){for(var e;e=Gt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pe),e.__H.__h.forEach(Te),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){b=null,et&&et(e)},w.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),it&&it(e,t)},w.__r=function(e){tt&&tt(e),j=0;var t=(b=e.__c).__H;t&&(we===b?(t.__h=[],b.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(pe),t.__h.forEach(Te),t.__h=[],j=0)),we=b},w.diffed=function(e){rt&&rt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Gt.push(t)!==1&&Xe===w.requestAnimationFrame||((Xe=w.requestAnimationFrame)||Nr)($r)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),we=b=null},w.__c=function(e,t){t.some(function(r){try{r.__h.forEach(pe),r.__h=r.__h.filter(function(n){return!n.__||Te(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],w.__e(n,r.__v)}}),nt&&nt(e,t)},w.unmount=function(e){ot&&ot(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{pe(n)}catch(o){t=o}}),r.__H=void 0,t&&w.__e(t,r.__v))};var ct=typeof requestAnimationFrame=="function";function Nr(e){var t,r=function(){clearTimeout(n),ct&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);ct&&(t=requestAnimationFrame(r))}function pe(e){var t=b,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),b=t}function Te(e){var t=b;e.__c=e.__(),b=t}function Fe(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function At(e,t){return typeof t=="function"?t(e):t}const Cr=({gpus:e,selectedGpuId:t,onChange:r,id:n})=>e.length===0?a("select",{id:n,disabled:!0,children:a("option",{children:"No GPUs detected"})}):a("select",{id:n,value:t??"",onChange:o=>r(o.currentTarget.value),children:e.map(o=>a("option",{value:o.id,children:[o.name||o.id," (",o.id,")"]},o.id))});function Ue(e,t=0){return e==null||Number.isNaN(e)?"—":`${e.toFixed(t)}%`}function st(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} MHz`}function Pr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} °C`}function Tr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} W`}function Ur(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} RPM`}const lt=["B","KiB","MiB","GiB","TiB"];function ee(e,t=1){if(e==null||Number.isNaN(e))return"—";let r=0,n=e;for(;n>=1024&&r<lt.length-1;)n/=1024,r+=1;return`${n.toFixed(r===0?0:t)} ${lt[r]}`}function He(e){if(!e)return"—";const t=Date.parse(e);if(Number.isNaN(t))return"—";const r=Date.now()-t;if(r<0)return"just now";if(r<1e3)return`${Math.round(r)} ms ago`;const n=Math.round(r/1e3);return n<60?`${n}s ago`:`${Math.round(n/60)}m ago`}function xr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(1)} ms/s`}const Ir=({sample:e})=>{if(!e)return a("div",{class:"empty-state",children:[a("strong",{children:"No telemetry yet"}),a("p",{children:"Waiting for the first metrics sample from sampler."})]});const{metrics:t,ts:r}=e;return a(A,{children:[a("section",{class:"grid stats-grid",children:[a("article",{class:"metric-card metric-card--inline",title:"Overall GPU engine utilization percentage",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Load"}),a("span",{class:"metric-value",children:Ue(t.gpu_busy_pct,1)})]})}),a("article",{class:"metric-card metric-card--inline",title:"Memory controller busy percentage",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Memory"}),a("span",{class:"metric-value",children:Ue(t.mem_busy_pct,1)})]})}),a("article",{class:"metric-card metric-card--inline",title:"Graphics core clock frequency",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Core"}),a("span",{class:"metric-value",children:st(t.sclk_mhz)})]})}),a("article",{class:"metric-card metric-card--inline",title:"Memory clock frequency",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"MemClk"}),a("span",{class:"metric-value",children:st(t.mclk_mhz)})]})}),a("article",{class:"metric-card metric-card--inline",title:"GPU temperature",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Temp"}),a("span",{class:"metric-value",children:Pr(t.temp_c)})]})}),a("article",{class:"metric-card metric-card--inline",title:"Fan speed in RPM",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Fan"}),a("span",{class:"metric-value",children:Ur(t.fan_rpm)})]})}),a("article",{class:"metric-card metric-card--inline",title:"Instantaneous power draw",children:a("div",{class:"metric-card__row",children:[a("h3",{children:"Power"}),a("span",{class:"metric-value",children:Tr(t.power_w)})]})})]}),a("small",{class:"muted stats-updated",children:["Last update ",He(r)]})]})};function ut(e,t){return e==null||t==null||t<=0?null:Math.min(1,Math.max(0,e/t))}const Rr=({sample:e})=>{if(!e)return null;const{metrics:t}=e,r=t.gpu_busy_pct==null||Number.isNaN(t.gpu_busy_pct)?null:Math.min(1,Math.max(0,t.gpu_busy_pct/100)),n=ut(t.vram_used_bytes,t.vram_total_bytes),o=ut(t.gtt_used_bytes,t.gtt_total_bytes),i=[{key:"vram",label:"VRAM Usage",used:t.vram_used_bytes,total:t.vram_total_bytes,ratio:n},{key:"gtt",label:"GTT Usage",used:t.gtt_used_bytes,total:t.gtt_total_bytes,ratio:o}];return a("section",{class:"grid usage-grid",children:[a("article",{class:"metric-card metric-card--compact",title:"Current GPU load averaged over the sampling interval",children:[a("div",{class:"metric-card__row",children:[a("h3",{children:"GPU Load"}),a("span",{class:"metric-inline-value",children:Ue(t.gpu_busy_pct,1)})]}),a("div",{class:"progress progress--thin",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round((r??0)*100),children:a("span",{style:`width: ${(r??0)*100}%`})})]}),i.map(c=>{const l=c.used!=null&&c.total!=null?`${ee(c.used)} / ${ee(c.total)}`:ee(c.used);return a("article",{class:"metric-card metric-card--compact",title:c.key==="vram"?"Video memory usage (bytes used out of total)":"Graphics translation table usage (bytes used out of total)",children:[a("div",{class:"metric-card__row",children:[a("h3",{children:c.label}),a("span",{class:"metric-inline-value",children:l})]}),a("div",{class:"progress progress--thin",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round((c.ratio??0)*100),children:a("span",{style:`width: ${(c.ratio??0)*100}%`})})]},c.key)})]})},Or={key:"total",direction:"desc"},Mr=({snapshot:e})=>{const[t,r]=ie(Or),n=q(()=>{if(!e)return[];const c=[...e.processes.map(l=>{const _=l.vram_bytes??0,u=l.gtt_bytes??0,p=(l.cmd??"").trim();return{...l,totalBytes:_+u,cmdTooltip:p||null}})];return c.sort((l,_)=>{let u=0;switch(t.key){case"total":u=l.totalBytes-_.totalBytes;break;case"vram":u=(l.vram_bytes??0)-(_.vram_bytes??0);break;case"gtt":u=(l.gtt_bytes??0)-(_.gtt_bytes??0);break;case"pid":u=l.pid-_.pid;break;default:u=0}return t.direction==="asc"?u:-u}),c},[e,t]);if(!e)return null;const o=i=>{r(c=>{if(c.key===i){const l=c.direction==="asc"?"desc":"asc";return{key:i,direction:l}}return{key:i,direction:i==="pid"?"asc":"desc"}})};return a("section",{style:"margin-top: 1.5rem;",children:[a("header",{style:"margin-bottom: 0.5rem;",children:[a("h2",{style:"margin: 0;",children:"Processes"}),a("small",{class:"muted",children:["Last update ",He(e.ts)," · ",n.length," entries"]})]}),n.length===0?a("div",{class:"empty-state",children:a("p",{children:"No processes currently using this GPU."})}):a("div",{class:"table-responsive",children:a("table",{class:"proc-table",role:"grid",children:[a("thead",{children:a("tr",{children:[a("th",{scope:"col",onClick:()=>o("pid"),style:"cursor: pointer;",children:"PID"}),a("th",{scope:"col",children:"User"}),a("th",{scope:"col",children:"Name"}),a("th",{scope:"col",onClick:()=>o("vram"),style:"cursor: pointer;",children:"VRAM"}),a("th",{scope:"col",onClick:()=>o("gtt"),style:"cursor: pointer;",children:"GTT"}),a("th",{scope:"col",onClick:()=>o("total"),style:"cursor: pointer;",children:"Total"}),a("th",{scope:"col",children:"GPU Time"})]})}),a("tbody",{children:n.map(i=>a("tr",{children:[a("td",{children:i.pid}),a("td",{children:i.user||"—"}),a("td",{class:"name-cell",children:a("div",{class:"proc-name",title:i.cmdTooltip||i.name||void 0,children:a("strong",{children:i.name||"—"})})}),a("td",{children:ee(i.vram_bytes)}),a("td",{children:ee(i.gtt_bytes)}),a("td",{children:ee(i.totalBytes)}),a("td",{children:xr(i.gpu_time_ms_per_s)})]},i.pid))})]})}),a("small",{class:"muted",children:["Capabilities: VRAM/GTT ",e.capabilities.vram_gtt_from_fdinfo?"✓":"—",", GPU time ",e.capabilities.engine_time_from_fdinfo?"✓":"—"]})]})},Dr={},at=e=>{let t;const r=new Set,n=(p,s)=>{const h=typeof p=="function"?p(t):p;if(!Object.is(h,t)){const d=t;t=s??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(y=>y(t,d))}},o=()=>t,_={setState:n,getState:o,getInitialState:()=>u,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(Dr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,o,_);return _},Gr=e=>e?at(e):at;function Lt(e,t){for(var r in t)e[r]=t[r];return e}function xe(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Be(e,t){var r=t(),n=ie({t:{__:r,u:t}}),o=n[0].t,i=n[1];return ce(function(){o.__=r,o.u=t,Ee(o)&&i({t:o})},[e,r,t]),D(function(){return Ee(o)&&i({t:o}),e(function(){Ee(o)&&i({t:o})})},[e]),r}function Ee(e){var t,r,n=e.u,o=e.__;try{var i=n();return!((t=o)===(r=i)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}function Ve(e){e()}function We(e){return e}function je(){return[!1,Ve]}var ze=ce;function me(e,t){this.props=e,this.context=t}function Ft(e,t){function r(o){var i=this.props.ref,c=i==o.ref;return!c&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!c:xe(this.props,o)}function n(o){return this.shouldComponentUpdate=r,H(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n.type=e,n}(me.prototype=new G).isPureReactComponent=!0,me.prototype.shouldComponentUpdate=function(e,t){return xe(this.props,e)||xe(this.state,t)};var _t=m.__b;m.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),_t&&_t(e)};var Ar=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ht(e){function t(r){var n=Lt({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=Ar,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var ft=function(e,t){return e==null?null:W(W(e).map(t))},Bt={map:ft,forEach:ft,count:function(e){return e?W(e).length:0},only:function(e){var t=W(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:W},Lr=m.__e;m.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}Lr(e,t,r,n)};var dt=m.unmount;function Vt(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Lt({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Vt(n,t,r)})),e}function Wt(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Wt(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function le(){this.__u=0,this.o=null,this.__b=null}function jt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function zt(e){var t,r,n;function o(i){if(t||(t=e()).then(function(c){r=c.default||c},function(c){n=c}),n)throw n;if(!r)throw t;return H(r,i)}return o.displayName="Lazy",o.__f=!0,o}function X(){this.i=null,this.l=null}m.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),dt&&dt(e)},(le.prototype=new G).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var o=jt(n.__v),i=!1,c=function(){i||(i=!0,r.__R=null,o?o(l):l())};r.__R=c;var l=function(){if(!--n.__u){if(n.state.__a){var _=n.state.__a;n.__v.__k[0]=Wt(_,_.__c.__P,_.__c.__O)}var u;for(n.setState({__a:n.__b=null});u=n.o.pop();)u.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(c,c)},le.prototype.componentWillUnmount=function(){this.o=[]},le.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Vt(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&H(A,null,e.fallback);return o&&(o.__u&=-33),[H(A,null,t.__a?null:e.children),o]};var pt=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function Fr(e){return this.getChildContext=function(){return e.context},e.children}function Hr(e){var t=this,r=e.h;if(t.componentWillUnmount=function(){re(null,t.v),t.v=null,t.h=null},t.h&&t.h!==r&&t.componentWillUnmount(),!t.v){for(var n=t.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;t.h=r,t.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(o,i){this.childNodes.push(o),t.h.insertBefore(o,i)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),t.h.removeChild(o)}}}re(H(Fr,{context:t.context},e.__v),t.v)}function qt(e,t){var r=H(Hr,{__v:e,h:t});return r.containerInfo=t,r}(X.prototype=new G).__a=function(e){var t=this,r=jt(t.__v),n=t.l.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),pt(t,e,n)):o()};r?r(i):i()}},X.prototype.render=function(e){this.i=null,this.l=new Map;var t=W(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},X.prototype.componentDidUpdate=X.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){pt(e,r,t)})};var Jt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Br=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Vr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Wr=/[A-Z0-9]/g,jr=typeof document<"u",zr=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Yt(e,t,r){return t.__k==null&&(t.textContent=""),re(e,t),typeof r=="function"&&r(),e?e.__c:null}function Kt(e,t,r){return Mt(e,t),typeof r=="function"&&r(),e?e.__c:null}G.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(G.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var ht=m.event;function qr(){}function Jr(){return this.cancelBubble}function Yr(){return this.defaultPrevented}m.event=function(e){return ht&&(e=ht(e)),e.persist=qr,e.isPropagationStopped=Jr,e.isDefaultPrevented=Yr,e.nativeEvent=e};var qe,Kr={enumerable:!1,configurable:!0,get:function(){return this.class}},mt=m.vnode;m.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={},i=n.indexOf("-")===-1;for(var c in r){var l=r[c];if(!(c==="value"&&"defaultValue"in r&&l==null||jr&&c==="children"&&n==="noscript"||c==="class"||c==="className")){var _=c.toLowerCase();c==="defaultValue"&&"value"in r&&r.value==null?c="value":c==="download"&&l===!0?l="":_==="translate"&&l==="no"?l=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?c="ondblclick":_!=="onchange"||n!=="input"&&n!=="textarea"||zr(r.type)?_==="onfocus"?c="onfocusin":_==="onblur"?c="onfocusout":Vr.test(c)&&(c=_):_=c="oninput":i&&Br.test(c)?c=c.replace(Wr,"-$&").toLowerCase():l===null&&(l=void 0),_==="oninput"&&o[c=_]&&(c="oninputCapture"),o[c]=l}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=W(r.children).forEach(function(u){u.props.selected=o.value.indexOf(u.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=W(r.children).forEach(function(u){u.props.selected=o.multiple?o.defaultValue.indexOf(u.props.value)!=-1:o.defaultValue==u.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",Kr)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Jt,mt&&mt(e)};var vt=m.__r;m.__r=function(e){vt&&vt(e),qe=e.__c};var yt=m.diffed;m.diffed=function(e){yt&&yt(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),qe=null};var Zt={ReactCurrentDispatcher:{current:{readContext:function(e){return qe.__n[e.__c].props.value},useCallback:ye,useContext:Ge,useDebugValue:Ae,useDeferredValue:We,useEffect:D,useId:Le,useImperativeHandle:De,useInsertionEffect:ze,useLayoutEffect:ce,useMemo:q,useReducer:ve,useRef:V,useState:ie,useSyncExternalStore:Be,useTransition:je}}},Zr="18.3.1";function Qt(e){return H.bind(null,e)}function fe(e){return!!e&&e.$$typeof===Jt}function Xt(e){return fe(e)&&e.type===A}function er(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function tr(e){return fe(e)?wr.apply(null,arguments):e}function rr(e){return!!e.__k&&(re(null,e),!0)}function nr(e){return e&&(e.base||e.nodeType===1&&e)||null}var or=function(e,t){return e(t)},ir=function(e,t){return e(t)},cr=A,sr=fe,lr={useState:ie,useId:Le,useReducer:ve,useEffect:D,useLayoutEffect:ce,useInsertionEffect:ze,useTransition:je,useDeferredValue:We,useSyncExternalStore:Be,startTransition:Ve,useRef:V,useImperativeHandle:De,useMemo:q,useCallback:ye,useContext:Ge,useDebugValue:Ae,version:"18.3.1",Children:Bt,render:Yt,hydrate:Kt,unmountComponentAtNode:rr,createPortal:qt,createElement:H,createContext:Dt,createFactory:Qt,cloneElement:tr,createRef:Pt,Fragment:A,isValidElement:fe,isElement:sr,isFragment:Xt,isMemo:er,findDOMNode:nr,Component:G,PureComponent:me,memo:Ft,forwardRef:Ht,flushSync:ir,unstable_batchedUpdates:or,StrictMode:cr,Suspense:le,SuspenseList:X,lazy:zt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Zt};const Qr=Object.freeze(Object.defineProperty({__proto__:null,Children:Bt,Component:G,Fragment:A,PureComponent:me,StrictMode:cr,Suspense:le,SuspenseList:X,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Zt,cloneElement:tr,createContext:Dt,createElement:H,createFactory:Qt,createPortal:qt,createRef:Pt,default:lr,findDOMNode:nr,flushSync:ir,forwardRef:Ht,hydrate:Kt,isElement:sr,isFragment:Xt,isMemo:er,isValidElement:fe,lazy:zt,memo:Ft,render:Yt,startTransition:Ve,unmountComponentAtNode:rr,unstable_batchedUpdates:or,useCallback:ye,useContext:Ge,useDebugValue:Ae,useDeferredValue:We,useEffect:D,useErrorBoundary:kr,useId:Le,useImperativeHandle:De,useInsertionEffect:ze,useLayoutEffect:ce,useMemo:q,useReducer:ve,useRef:V,useState:ie,useSyncExternalStore:Be,useTransition:je,version:Zr},Symbol.toStringTag,{value:"Module"}));function Xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function en(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var ur={exports:{}},ar={};const _r=en(Qr);var fr={exports:{}},dr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe=_r;function tn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:tn,nn=oe.useState,on=oe.useEffect,cn=oe.useLayoutEffect,sn=oe.useDebugValue;function ln(e,t){var r=t(),n=nn({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return cn(function(){o.value=r,o.getSnapshot=t,ke(o)&&i({inst:o})},[e,r,t]),on(function(){return ke(o)&&i({inst:o}),e(function(){ke(o)&&i({inst:o})})},[e]),sn(r),r}function ke(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rn(e,r)}catch{return!0}}function un(e,t){return t()}var an=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?un:ln;dr.useSyncExternalStore=oe.useSyncExternalStore!==void 0?oe.useSyncExternalStore:an;fr.exports=dr;var _n=fr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge=_r,fn=_n;function dn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:dn,hn=fn.useSyncExternalStore,mn=ge.useRef,vn=ge.useEffect,yn=ge.useMemo,gn=ge.useDebugValue;ar.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=mn(null);if(i.current===null){var c={hasValue:!1,value:null};i.current=c}else c=i.current;i=yn(function(){function _(d){if(!u){if(u=!0,p=d,d=n(d),o!==void 0&&c.hasValue){var y=c.value;if(o(y,d))return s=y}return s=d}if(y=s,pn(p,d))return y;var k=n(d);return o!==void 0&&o(y,k)?(p=d,y):(p=d,s=k)}var u=!1,p,s,h=r===void 0?null:r;return[function(){return _(t())},h===null?void 0:function(){return _(h())}]},[t,r,n,o]);var l=hn(e,i[0],i[1]);return vn(function(){c.hasValue=!0,c.value=l},[l]),gn(l),l};ur.exports=ar;var bn=ur.exports;const Sn=Xr(bn),pr={},{useDebugValue:wn}=lr,{useSyncExternalStoreWithSelector:En}=Sn;let gt=!1;const kn=e=>e;function $n(e,t=kn,r){(pr?"production":void 0)!=="production"&&r&&!gt&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gt=!0);const n=En(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return wn(n),n}const bt=e=>{(pr?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Gr(e):e,r=(n,o)=>$n(t,n,o);return Object.assign(r,t),r},Nn=e=>e?bt(e):bt,hr="amdgputop-web:ui-scale";function Cn(e){return e==="smallest"||e==="small"||e==="compact"||e==="medium"||e==="comfortable"||e==="large"}function Pn(){if(typeof window>"u")return"large";try{const e=window.localStorage.getItem(hr);if(Cn(e))return e}catch{}return"large"}const Tn=Pn(),E=Nn(e=>({gpus:[],selectedGpuId:null,connection:"idle",features:{},sampleIntervalMs:null,statsByGpu:{},procsByGpu:{},lastUpdatedTs:null,version:null,error:null,uiScale:Tn,setGPUs:t=>e(r=>{let n=r.selectedGpuId;return(!n||!t.some(o=>o.id===n))&&(n=t.length>0?t[0].id:null),{gpus:t,selectedGpuId:n}}),setSelectedGpuId:t=>e({selectedGpuId:t}),setConnection:t=>e({connection:t}),setFeatures:t=>e({features:t}),setSampleInterval:t=>e({sampleIntervalMs:t}),updateStats:t=>e(r=>({statsByGpu:{...r.statsByGpu,[t.gpu_id]:t},lastUpdatedTs:Date.now()})),updateProcs:t=>e(r=>({procsByGpu:{...r.procsByGpu,[t.gpu_id]:t},lastUpdatedTs:Date.now()})),clearGpuData:t=>e(r=>{const n={...r.statsByGpu},o={...r.procsByGpu};return delete n[t],delete o[t],{statsByGpu:n,procsByGpu:o}}),setVersion:t=>e({version:t}),setError:t=>e({error:t}),setUiScale:t=>e(r=>{if(r.uiScale===t)return{};if(typeof window<"u")try{window.localStorage.setItem(hr,t)}catch{}return{uiScale:t}})}));function Un(e){const t={...e,isEqual(r){return r?t.version===r.version&&t.commit===r.commit&&t.build_time===r.build_time:!1}};return t}const xn=2e3,In=1e4,Rn=["smallest","small","compact","medium","comfortable","large"],On=()=>{const e=E(f=>f.gpus),t=E(f=>f.selectedGpuId),r=E(f=>f.statsByGpu),n=E(f=>f.procsByGpu),o=E(f=>f.connection),i=E(f=>f.features),c=E(f=>f.sampleIntervalMs),l=E(f=>f.lastUpdatedTs),_=E(f=>f.version),u=E(f=>f.error),p=E(f=>f.setGPUs),s=E(f=>f.setSelectedGpuId),h=E(f=>f.setConnection),d=E(f=>f.setFeatures),y=E(f=>f.setSampleInterval),k=E(f=>f.updateStats),S=E(f=>f.updateProcs),g=E(f=>f.clearGpuData),v=E(f=>f.setVersion),$=E(f=>f.setError),R=E(f=>f.uiScale),Z=E(f=>f.setUiScale),P=V(null),x=V(null),B=V(null),z=V(null),Q=V(null),T=V(!1),O=ye(async()=>{try{const f=await fetch("/api/version",{cache:"no-store"});if(!f.ok)throw new Error(`HTTP ${f.status}`);return Un(await f.json())}catch(f){return console.warn("Unable to load version info",f),null}},[]);D(()=>{z.current=t},[t]),D(()=>{Q.current=_},[_]),D(()=>{let f=!1;return(async()=>{try{const I=await fetch("/api/gpus");if(!I.ok)throw new Error(`HTTP ${I.status}`);const C=await I.json();f||(p(C),$(null))}catch(I){f||(console.error("Failed to load GPU list",I),$("Failed to load GPU list"))}})(),()=>{f=!0}},[p,$]),D(()=>{let f=!1;return(async()=>{const I=await O();!f&&I&&v(I)})(),()=>{f=!0}},[O,v]),D(()=>{let f=!1;const N=()=>{B.current!=null&&(window.clearInterval(B.current),B.current=null)},I=()=>{f||x.current==null&&(x.current=window.setTimeout(()=>{x.current=null,C()},xn))},C=()=>{if(f)return;x.current!=null&&(window.clearTimeout(x.current),x.current=null),N();const M=P.current;if(!(M&&M.readyState!==WebSocket.CLOSED&&M.readyState!==WebSocket.CLOSING))try{h("connecting"),$(null);const J=new URL(window.location.href);J.protocol=J.protocol==="https:"?"wss:":"ws:",J.pathname="/ws",J.search="";const L=new WebSocket(J.toString());P.current=L,L.onopen=()=>{const be=T.current;T.current=!0,h("open");const U=z.current;U&&L.send(JSON.stringify({type:"subscribe",gpu_id:U})),L.send(JSON.stringify({type:"ping"})),B.current=window.setInterval(()=>{L.readyState===WebSocket.OPEN&&L.send(JSON.stringify({type:"ping"}))},In),(async()=>{const Se=await O();if(!(!Se||f)){if(be){const Ye=Q.current;if(Ye&&!Ye.isEqual(Se)){window.location.reload();return}}v(Se)}})()},L.onmessage=be=>{try{const U=JSON.parse(be.data);switch(U.type){case"hello":d(U.features??{}),y(U.interval_ms),p(U.gpus??[]);break;case"stats":k(U);break;case"procs":S(U);break;case"error":$(U.message);break;case"pong":break;default:console.warn("Unhandled message",U)}}catch(U){console.error("Failed to decode websocket message",U)}},L.onerror=()=>{h("error")},L.onclose=()=>{N(),P.current===L&&(P.current=null),h("closed"),I()}}catch(J){console.error("Failed to open websocket",J),h("error"),I()}};return C(),()=>{f=!0,N(),x.current!=null&&window.clearTimeout(x.current),x.current=null;const M=P.current;P.current=null,M==null||M.close(1e3,"shutdown")}},[O,h,$,d,p,y,v,S,k]),D(()=>{if(!t)return;const f=P.current;f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"subscribe",gpu_id:t}));let N=!1;return(async()=>{try{const C=await fetch(`/api/gpus/${t}/metrics`);if(C.ok){const M=await C.json();N||k(M)}}catch(C){console.debug("metrics fetch failed",C)}if(i.procs)try{const C=await fetch(`/api/gpus/${t}/procs`);if(C.ok){const M=await C.json();N||S(M)}}catch(C){console.debug("procs fetch failed",C)}})(),()=>{N=!0}},[i.procs,t,S,k]),D(()=>{const f=new Set(e.map(N=>N.id));Object.keys(r).forEach(N=>{f.has(N)||g(N)})},[g,e,r]);const Je=q(()=>{if(t)return r[t]},[t,r]),mr=q(()=>{if(t)return n[t]},[n,t]);return a("main",{"data-scale":R,children:[a("header",{children:[a("h1",{style:"margin: 0;",children:"AMD GPU stats"}),a("div",{class:"gpu-picker",children:a(Cr,{gpus:e,selectedGpuId:t,onChange:f=>s(f),id:"gpu-select"})})]}),o!=="open"&&a("div",{class:`status-banner ${o==="error"?"error":"info"}`,role:"status",children:[o==="connecting"&&"Connecting to sampler…",o==="error"&&"Connection lost — attempting to reconnect",o==="closed"&&"Disconnected — retrying shortly"]}),u&&a("div",{class:"status-banner warn",role:"alert",children:u}),a(Ir,{sample:Je}),a(Rr,{sample:Je}),i.procs?a(Mr,{snapshot:mr}):null,a("footer",{children:[c?a("span",{class:"badge",children:["Update interval ",c," ms"]}):null,l?a("span",{children:["Last frame ",He(new Date(l).toISOString())]}):a("span",{children:"No telemetry received yet"}),_?a("span",{children:["Version ",_.version," ",_.commit?`(${_.commit.substring(0,7)})`:""]}):null,a("div",{class:"scale-picker",children:[a("label",{for:"ui-scale",children:"UI Scale"}),a("select",{id:"ui-scale",value:R,onChange:f=>Z(f.currentTarget.value),children:Rn.map(f=>a("option",{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f))})]}),a("a",{href:"https://github.com/skobkin/amdgputop-web",target:"_blank",rel:"noreferrer",children:"GitHub →"})]})]})},St=document.getElementById("root");St&&re(a(On,{}),St);
//# sourceMappingURL=index-B1CxrIqr.js.map
