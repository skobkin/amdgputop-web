(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var se,m,ht,j,Le,mt,vt,yt,$e,be,ge,bt,ie={},gt=[],lr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function G(e,t){for(var r in t)e[r]=t[r];return e}function Ne(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function F(e,t,r){var n,o,i,s={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?se.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return re(e,s,n,o,null)}function re(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++ht,__i:-1,__u:0};return o==null&&m.vnode!=null&&m.vnode(i),i}function St(){return{current:null}}function D(e){return e.children}function R(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Y(e):null}function wt(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return wt(e)}}function Se(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!fe.__r++||Le!=m.debounceRendering)&&((Le=m.debounceRendering)||mt)(fe)}function fe(){for(var e,t,r,n,o,i,s,u=1;j.length;)j.length>u&&j.sort(vt),e=j.shift(),u=j.length,e.__d&&(r=void 0,n=void 0,o=(n=(t=e).__v).__e,i=[],s=[],t.__P&&((r=G({},n)).__v=n.__v+1,m.vnode&&m.vnode(r),Ce(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[o]:null,i,o??Y(n),!!(32&n.__u),s),r.__v=n.__v,r.__.__k[r.__i]=r,$t(i,r,s),n.__e=n.__=null,r.__e!=o&&wt(r)));fe.__r=0}function Et(e,t,r,n,o,i,s,u,a,l,p){var c,h,d,v,N,w,y,b=n&&n.__k||gt,P=t.length;for(a=ur(r,t,b,a,P),c=0;c<P;c++)(d=r.__k[c])!=null&&(h=d.__i==-1?ie:b[d.__i]||ie,d.__i=c,w=Ce(e,d,h,o,i,s,u,a,l,p),v=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&Pe(h.ref,null,d),p.push(d.ref,d.__c||v,d)),N==null&&v!=null&&(N=v),(y=!!(4&d.__u))||h.__k===d.__k?a=kt(d,a,e,y):typeof d.type=="function"&&w!==void 0?a=w:v&&(a=v.nextSibling),d.__u&=-7);return r.__e=N,a}function ur(e,t,r,n,o){var i,s,u,a,l,p=r.length,c=p,h=0;for(e.__k=new Array(o),i=0;i<o;i++)(s=t[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=i+h,(s=e.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?re(null,s,null,null,null):ce(s)?re(D,{children:s},null,null,null):s.constructor==null&&s.__b>0?re(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,u=null,(l=s.__i=_r(s,r,a,c))!=-1&&(c--,(u=r[l])&&(u.__u|=2)),u==null||u.__v==null?(l==-1&&(o>p?h--:o<p&&h++),typeof s.type!="function"&&(s.__u|=4)):l!=a&&(l==a-1?h--:l==a+1?h++:(l>a?h--:h++,s.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(u=r[i])!=null&&!(2&u.__u)&&(u.__e==n&&(n=Y(u)),Ct(u,u));return n}function kt(e,t,r,n){var o,i;if(typeof e.type=="function"){for(o=e.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=e,t=kt(o[i],t,r,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=Y(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function A(e,t){return t=t||[],e==null||typeof e=="boolean"||(ce(e)?e.some(function(r){A(r,t)}):t.push(e)),t}function _r(e,t,r,n){var o,i,s,u=e.key,a=e.type,l=t[r],p=l!=null&&(2&l.__u)==0;if(l===null&&e.key==null||p&&u==l.key&&a==l.type)return r;if(n>(p?1:0)){for(o=r-1,i=r+1;o>=0||i<t.length;)if((l=t[s=o>=0?o--:i++])!=null&&!(2&l.__u)&&u==l.key&&a==l.type)return s}return-1}function We(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||lr.test(t)?r:r+"px"}function _e(e,t,r,n,o){var i,s;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||We(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||We(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(yt,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=$e,e.addEventListener(t,i?ge:be,i)):e.removeEventListener(t,i?ge:be,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Ve(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=$e++;else if(t.t<r.u)return;return r(m.event?m.event(t):t)}}}function Ce(e,t,r,n,o,i,s,u,a,l){var p,c,h,d,v,N,w,y,b,P,U,x,I,te,W,V,f,S=t.type;if(t.constructor!=null)return null;128&r.__u&&(a=!!(32&r.__u),i=[u=t.__e=r.__e]),(p=m.__b)&&p(t);e:if(typeof S=="function")try{if(y=t.props,b="prototype"in S&&S.prototype.render,P=(p=S.contextType)&&n[p.__c],U=p?P?P.props.value:p.__:n,r.__c?w=(c=t.__c=r.__c).__=c.__E:(b?t.__c=c=new S(y,U):(t.__c=c=new R(y,U),c.constructor=S,c.render=fr),P&&P.sub(c),c.props=y,c.state||(c.state={}),c.context=U,c.__n=n,h=c.__d=!0,c.__h=[],c._sb=[]),b&&c.__s==null&&(c.__s=c.state),b&&S.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=G({},c.__s)),G(c.__s,S.getDerivedStateFromProps(y,c.__s))),d=c.props,v=c.state,c.__v=t,h)b&&S.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),b&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(b&&S.getDerivedStateFromProps==null&&y!==d&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,U),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,U)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(c.props=y,c.state=c.__s,c.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(k){k&&(k.__=t)}),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[],c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,U),b&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(d,v,N)})}if(c.context=U,c.props=y,c.__P=e,c.__e=!1,I=m.__r,te=0,b){for(c.state=c.__s,c.__d=!1,I&&I(t),p=c.render(c.props,c.state,c.context),W=0;W<c._sb.length;W++)c.__h.push(c._sb[W]);c._sb=[]}else do c.__d=!1,I&&I(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++te<25);c.state=c.__s,c.getChildContext!=null&&(n=G(G({},n),c.getChildContext())),b&&!h&&c.getSnapshotBeforeUpdate!=null&&(N=c.getSnapshotBeforeUpdate(d,v)),V=p,p!=null&&p.type===D&&p.key==null&&(V=Nt(p.props.children)),u=Et(e,ce(V)?V:[V],t,r,n,o,i,s,u,a,l),c.base=t.__e,t.__u&=-161,c.__h.length&&s.push(c),w&&(c.__E=c.__=null)}catch(k){if(t.__v=null,a||i!=null)if(k.then){for(t.__u|=a?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,t.__e=u}else{for(f=i.length;f--;)Ne(i[f]);we(t)}else t.__e=r.__e,t.__k=r.__k,k.then||we(t);m.__e(k,t,r)}else i==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):u=t.__e=ar(r.__e,t,r,n,o,i,s,a,l);return(p=m.diffed)&&p(t),128&t.__u?void 0:u}function we(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(we)}function $t(e,t,r){for(var n=0;n<r.length;n++)Pe(r[n],r[++n],r[++n]);m.__c&&m.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){m.__e(i,o.__v)}})}function Nt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ce(e)?e.map(Nt):G({},e)}function ar(e,t,r,n,o,i,s,u,a){var l,p,c,h,d,v,N,w=r.props,y=t.props,b=t.type;if(b=="svg"?o="http://www.w3.org/2000/svg":b=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((d=i[l])&&"setAttribute"in d==!!b&&(b?d.localName==b:d.nodeType==3)){e=d,i[l]=null;break}}if(e==null){if(b==null)return document.createTextNode(y);e=document.createElementNS(o,b,y.is&&y),u&&(m.__m&&m.__m(t,i),u=!1),i=null}if(b==null)w===y||u&&e.data==y||(e.data=y);else{if(i=i&&se.call(e.childNodes),w=r.props||ie,!u&&i!=null)for(w={},l=0;l<e.attributes.length;l++)w[(d=e.attributes[l]).name]=d.value;for(l in w)if(d=w[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=d;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;_e(e,l,null,d,o)}}for(l in y)d=y[l],l=="children"?h=d:l=="dangerouslySetInnerHTML"?p=d:l=="value"?v=d:l=="checked"?N=d:u&&typeof d!="function"||w[l]===d||_e(e,l,d,w[l],o);if(p)u||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),Et(t.type=="template"?e.content:e,ce(h)?h:[h],t,r,n,b=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,s,i?i[0]:r.__k&&Y(r,0),u,a),i!=null)for(l=i.length;l--;)Ne(i[l]);u||(l="value",b=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[l]||b=="progress"&&!v||b=="option"&&v!=w[l])&&_e(e,l,v,w[l],o),l="checked",N!=null&&N!=e[l]&&_e(e,l,N,w[l],o))}return e}function Pe(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(o){m.__e(o,r)}}function Ct(e,t,r){var n,o;if(m.unmount&&m.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||Pe(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){m.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&Ct(n[o],t,r||typeof e.type!="function");r||Ne(e.__e),e.__c=e.__=e.__e=void 0}function fr(e,t,r){return this.constructor(e,r)}function K(e,t,r){var n,o,i,s;t==document&&(t=document.documentElement),m.__&&m.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],s=[],Ce(t,e=(!n&&r||t).__k=F(D,null,[e]),o||ie,ie,t.namespaceURI,!n&&r?[r]:o?null:t.firstChild?se.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,s),$t(i,e,s)}function Pt(e,t){K(e,t,Pt)}function dr(e,t,r){var n,o,i,s,u=G({},e.props);for(i in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?o=t[i]:u[i]=t[i]===void 0&&s!=null?s[i]:t[i];return arguments.length>2&&(u.children=arguments.length>3?se.call(arguments,2):r),re(e.type,u,n||e.key,o||e.ref,null)}function Tt(e){function t(r){var n,o;return this.getChildContext||(n=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&n.forEach(function(s){s.__e=!0,Se(s)})},this.sub=function(i){n.add(i);var s=i.componentWillUnmount;i.componentWillUnmount=function(){n&&n.delete(i),s&&s.call(i)}}),r.children}return t.__c="__cC"+bt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,n){return r.children(n)}).contextType=t,t}se=gt.slice,m={__e:function(e,t,r,n){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),s=o.__d),s)return o.__E=o}catch(u){e=u}throw e}},ht=0,R.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=G({},this.state),typeof e=="function"&&(e=e(G({},r),this.props)),e&&G(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Se(this))},R.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Se(this))},R.prototype.render=D,j=[],mt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vt=function(e,t){return e.__v.__b-t.__v.__b},fe.__r=0,yt=/(PointerCapture)$|Capture$/i,$e=0,be=Ve(!1),ge=Ve(!0),bt=0;var pr=0;function _(e,t,r,n,o,i){t||(t={});var s,u,a=t;if("ref"in a)for(u in a={},t)u=="ref"?s=t[u]:a[u]=t[u];var l={type:e,props:a,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--pr,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(u in s)a[u]===void 0&&(a[u]=s[u]);return m.vnode&&m.vnode(l),l}var H,g,me,je,Z=0,xt=[],E=m,ze=E.__b,qe=E.__r,Je=E.diffed,Ye=E.__c,Ke=E.unmount,Ze=E.__;function q(e,t){E.__h&&E.__h(g,e,Z||t),Z=0;var r=g.__H||(g.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function X(e){return Z=1,pe(Ut,e)}function pe(e,t,r){var n=q(H++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Ut(void 0,t),function(u){var a=n.__N?n.__N[0]:n.__[0],l=n.t(a,u);a!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=g,!g.__f)){var o=function(u,a,l){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!i||i.call(this,u,a,l);var c=n.__c.props!==u;return p.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(c=!0)}}),i&&i.call(this,u,a,l)||c};g.__f=!0;var i=g.shouldComponentUpdate,s=g.componentWillUpdate;g.componentWillUpdate=function(u,a,l){if(this.__e){var p=i;i=void 0,o(u,a,l),i=p}s&&s.call(this,u,a,l)},g.shouldComponentUpdate=o}return n.__N||n.__}function M(e,t){var r=q(H++,3);!E.__s&&Ie(r.__H,t)&&(r.__=e,r.u=t,g.__H.__h.push(r))}function ee(e,t){var r=q(H++,4);!E.__s&&Ie(r.__H,t)&&(r.__=e,r.u=t,g.__h.push(r))}function z(e){return Z=5,L(function(){return{current:e}},[])}function Te(e,t,r){Z=6,ee(function(){if(typeof e=="function"){var n=e(t());return function(){e(null),n&&typeof n=="function"&&n()}}if(e)return e.current=t(),function(){return e.current=null}},r==null?r:r.concat(e))}function L(e,t){var r=q(H++,7);return Ie(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function xe(e,t){return Z=8,L(function(){return e},t)}function Ue(e){var t=g.context[e.__c],r=q(H++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(g)),t.props.value):e.__}function Re(e,t){E.useDebugValue&&E.useDebugValue(t?t(e):e)}function hr(e){var t=q(H++,10),r=X();return t.__=e,g.componentDidCatch||(g.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function De(){var e=q(H++,11);if(!e.__){for(var t=g.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function mr(){for(var e;e=xt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(Ee),e.__H.__h=[]}catch(t){e.__H.__h=[],E.__e(t,e.__v)}}E.__b=function(e){g=null,ze&&ze(e)},E.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ze&&Ze(e,t)},E.__r=function(e){qe&&qe(e),H=0;var t=(g=e.__c).__H;t&&(me===g?(t.__h=[],g.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(ae),t.__h.forEach(Ee),t.__h=[],H=0)),me=g},E.diffed=function(e){Je&&Je(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(xt.push(t)!==1&&je===E.requestAnimationFrame||((je=E.requestAnimationFrame)||vr)(mr)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),me=g=null},E.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ae),r.__h=r.__h.filter(function(n){return!n.__||Ee(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],E.__e(n,r.__v)}}),Ye&&Ye(e,t)},E.unmount=function(e){Ke&&Ke(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{ae(n)}catch(o){t=o}}),r.__H=void 0,t&&E.__e(t,r.__v))};var Qe=typeof requestAnimationFrame=="function";function vr(e){var t,r=function(){clearTimeout(n),Qe&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);Qe&&(t=requestAnimationFrame(r))}function ae(e){var t=g,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),g=t}function Ee(e){var t=g;e.__c=e.__(),g=t}function Ie(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Ut(e,t){return typeof t=="function"?t(e):t}const yr=({gpus:e,selectedGpuId:t,onChange:r})=>e.length===0?_("div",{class:"empty-state",children:[_("strong",{children:"No GPUs detected"}),_("p",{children:"Ensure the amdgpu driver is loaded and this host exposes /dev/dri."})]}):_("label",{children:[_("span",{children:"GPU"}),_("select",{value:t??"",onChange:n=>r(n.currentTarget.value),children:e.map(n=>_("option",{value:n.id,children:[n.name||n.id," (",n.id,")"]},n.id))})]});function Xe(e,t=0){return e==null||Number.isNaN(e)?"—":`${e.toFixed(t)}%`}function et(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} MHz`}function br(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} °C`}function gr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} W`}function Sr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(0)} RPM`}const tt=["B","KiB","MiB","GiB","TiB"];function ne(e,t=1){if(e==null||Number.isNaN(e))return"—";let r=0,n=e;for(;n>=1024&&r<tt.length-1;)n/=1024,r+=1;return`${n.toFixed(r===0?0:t)} ${tt[r]}`}function Oe(e){if(!e)return"—";const t=Date.parse(e);if(Number.isNaN(t))return"—";const r=Date.now()-t;if(r<0)return"just now";if(r<1e3)return`${Math.round(r)} ms ago`;const n=Math.round(r/1e3);return n<60?`${n}s ago`:`${Math.round(n/60)}m ago`}function wr(e){return e==null||Number.isNaN(e)?"—":`${e.toFixed(1)} ms/s`}const Er=({sample:e})=>{if(!e)return _("div",{class:"empty-state",children:[_("strong",{children:"No telemetry yet"}),_("p",{children:"Waiting for the first metrics sample from sampler."})]});const{metrics:t,ts:r}=e;return _(D,{children:[_("section",{class:"grid stats-grid",children:[_("article",{class:"metric-card",children:[_("h3",{children:"GPU Busy"}),_("span",{class:"metric-value",children:Xe(t.gpu_busy_pct,1)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Memory Busy"}),_("span",{class:"metric-value",children:Xe(t.mem_busy_pct,1)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Core Clock"}),_("span",{class:"metric-value",children:et(t.sclk_mhz)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Memory Clock"}),_("span",{class:"metric-value",children:et(t.mclk_mhz)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Temperature"}),_("span",{class:"metric-value",children:br(t.temp_c)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Fan Speed"}),_("span",{class:"metric-value",children:Sr(t.fan_rpm)})]}),_("article",{class:"metric-card",children:[_("h3",{children:"Power Draw"}),_("span",{class:"metric-value",children:gr(t.power_w)})]})]}),_("small",{class:"muted",children:["Last update ",Oe(r)]})]})};function rt(e,t){return e==null||t==null||t<=0?null:Math.min(1,Math.max(0,e/t))}const kr=({sample:e})=>{if(!e)return null;const{metrics:t}=e,r=rt(t.vram_used_bytes,t.vram_total_bytes),n=rt(t.gtt_used_bytes,t.gtt_total_bytes),o=[{label:"VRAM",used:t.vram_used_bytes,total:t.vram_total_bytes,ratio:r},{label:"GTT",used:t.gtt_used_bytes,total:t.gtt_total_bytes,ratio:n}];return _("section",{class:"grid",style:"margin-top: 1.5rem;",children:o.map(i=>_("article",{class:"metric-card",children:[_("h3",{children:[i.label," Usage"]}),_("div",{class:"progress","aria-hidden":"true",children:_("span",{style:`width: ${(i.ratio??0)*100}%`})}),_("small",{class:"muted",children:[ne(i.used)," / ",ne(i.total)]})]},i.label))})},$r={key:"total",direction:"desc"},Nr=({snapshot:e})=>{const[t,r]=X($r),n=L(()=>{if(!e)return[];const s=[...e.processes.map(u=>{const a=u.vram_bytes??0,l=u.gtt_bytes??0;return{...u,totalBytes:a+l}})];return s.sort((u,a)=>{let l=0;switch(t.key){case"total":l=u.totalBytes-a.totalBytes;break;case"vram":l=(u.vram_bytes??0)-(a.vram_bytes??0);break;case"gtt":l=(u.gtt_bytes??0)-(a.gtt_bytes??0);break;case"pid":l=u.pid-a.pid;break;default:l=0}return t.direction==="asc"?l:-l}),s},[e,t]);if(!e)return null;const o=i=>{r(s=>{if(s.key===i){const u=s.direction==="asc"?"desc":"asc";return{key:i,direction:u}}return{key:i,direction:i==="pid"?"asc":"desc"}})};return _("section",{style:"margin-top: 2rem;",children:[_("header",{style:"margin-bottom: 0.75rem;",children:[_("h2",{style:"margin: 0;",children:"Processes"}),_("small",{class:"muted",children:["Last update ",Oe(e.ts)," · ",n.length," entries"]})]}),n.length===0?_("div",{class:"empty-state",children:_("p",{children:"No processes currently using this GPU."})}):_("div",{class:"table-responsive",children:_("table",{class:"proc-table",role:"grid",children:[_("thead",{children:_("tr",{children:[_("th",{scope:"col",onClick:()=>o("pid"),style:"cursor: pointer;",children:"PID"}),_("th",{scope:"col",children:"User"}),_("th",{scope:"col",children:"Name"}),_("th",{scope:"col",onClick:()=>o("vram"),style:"cursor: pointer;",children:"VRAM"}),_("th",{scope:"col",onClick:()=>o("gtt"),style:"cursor: pointer;",children:"GTT"}),_("th",{scope:"col",onClick:()=>o("total"),style:"cursor: pointer;",children:"Total"}),_("th",{scope:"col",children:"GPU Time"})]})}),_("tbody",{children:n.map(i=>_("tr",{children:[_("td",{children:i.pid}),_("td",{children:i.user||"—"}),_("td",{children:_("div",{style:"display:flex; flex-direction:column;",children:[_("strong",{children:i.name||"—"}),_("small",{class:"muted",style:"white-space: normal; max-width: 420px;",children:i.cmd||"—"})]})}),_("td",{children:ne(i.vram_bytes)}),_("td",{children:ne(i.gtt_bytes)}),_("td",{children:ne(i.totalBytes)}),_("td",{children:wr(i.gpu_time_ms_per_s)})]},i.pid))})]})}),_("small",{class:"muted",children:["Capabilities: VRAM/GTT ",e.capabilities.vram_gtt_from_fdinfo?"✓":"—",", GPU time ",e.capabilities.engine_time_from_fdinfo?"✓":"—"]})]})},Cr={},nt=e=>{let t;const r=new Set,n=(p,c)=>{const h=typeof p=="function"?p(t):p;if(!Object.is(h,t)){const d=t;t=c??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(v=>v(t,d))}},o=()=>t,a={setState:n,getState:o,getInitialState:()=>l,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(Cr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,o,a);return a},Pr=e=>e?nt(e):nt;function Rt(e,t){for(var r in t)e[r]=t[r];return e}function ke(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Me(e,t){var r=t(),n=X({t:{__:r,u:t}}),o=n[0].t,i=n[1];return ee(function(){o.__=r,o.u=t,ve(o)&&i({t:o})},[e,r,t]),M(function(){return ve(o)&&i({t:o}),e(function(){ve(o)&&i({t:o})})},[e]),r}function ve(e){var t,r,n=e.u,o=e.__;try{var i=n();return!((t=o)===(r=i)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}function Ge(e){e()}function Fe(e){return e}function Ae(){return[!1,Ge]}var He=ee;function de(e,t){this.props=e,this.context=t}function Dt(e,t){function r(o){var i=this.props.ref,s=i==o.ref;return!s&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!s:ke(this.props,o)}function n(o){return this.shouldComponentUpdate=r,F(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n.type=e,n}(de.prototype=new R).isPureReactComponent=!0,de.prototype.shouldComponentUpdate=function(e,t){return ke(this.props,e)||ke(this.state,t)};var ot=m.__b;m.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ot&&ot(e)};var Tr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function It(e){function t(r){var n=Rt({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=Tr,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var it=function(e,t){return e==null?null:A(A(e).map(t))},Ot={map:it,forEach:it,count:function(e){return e?A(e).length:0},only:function(e){var t=A(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:A},xr=m.__e;m.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}xr(e,t,r,n)};var st=m.unmount;function Mt(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Rt({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Mt(n,t,r)})),e}function Gt(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Gt(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function oe(){this.__u=0,this.o=null,this.__b=null}function Ft(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function At(e){var t,r,n;function o(i){if(t||(t=e()).then(function(s){r=s.default||s},function(s){n=s}),n)throw n;if(!r)throw t;return F(r,i)}return o.displayName="Lazy",o.__f=!0,o}function J(){this.i=null,this.l=null}m.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),st&&st(e)},(oe.prototype=new R).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var o=Ft(n.__v),i=!1,s=function(){i||(i=!0,r.__R=null,o?o(u):u())};r.__R=s;var u=function(){if(!--n.__u){if(n.state.__a){var a=n.state.__a;n.__v.__k[0]=Gt(a,a.__c.__P,a.__c.__O)}var l;for(n.setState({__a:n.__b=null});l=n.o.pop();)l.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(s,s)},oe.prototype.componentWillUnmount=function(){this.o=[]},oe.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Mt(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&F(D,null,e.fallback);return o&&(o.__u&=-33),[F(D,null,t.__a?null:e.children),o]};var ct=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function Ur(e){return this.getChildContext=function(){return e.context},e.children}function Rr(e){var t=this,r=e.h;if(t.componentWillUnmount=function(){K(null,t.v),t.v=null,t.h=null},t.h&&t.h!==r&&t.componentWillUnmount(),!t.v){for(var n=t.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;t.h=r,t.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(o,i){this.childNodes.push(o),t.h.insertBefore(o,i)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),t.h.removeChild(o)}}}K(F(Ur,{context:t.context},e.__v),t.v)}function Ht(e,t){var r=F(Rr,{__v:e,h:t});return r.containerInfo=t,r}(J.prototype=new R).__a=function(e){var t=this,r=Ft(t.__v),n=t.l.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),ct(t,e,n)):o()};r?r(i):i()}},J.prototype.render=function(e){this.i=null,this.l=new Map;var t=A(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},J.prototype.componentDidUpdate=J.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){ct(e,r,t)})};var Bt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Dr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ir=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Or=/[A-Z0-9]/g,Mr=typeof document<"u",Gr=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Lt(e,t,r){return t.__k==null&&(t.textContent=""),K(e,t),typeof r=="function"&&r(),e?e.__c:null}function Wt(e,t,r){return Pt(e,t),typeof r=="function"&&r(),e?e.__c:null}R.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(R.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var lt=m.event;function Fr(){}function Ar(){return this.cancelBubble}function Hr(){return this.defaultPrevented}m.event=function(e){return lt&&(e=lt(e)),e.persist=Fr,e.isPropagationStopped=Ar,e.isDefaultPrevented=Hr,e.nativeEvent=e};var Be,Br={enumerable:!1,configurable:!0,get:function(){return this.class}},ut=m.vnode;m.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={},i=n.indexOf("-")===-1;for(var s in r){var u=r[s];if(!(s==="value"&&"defaultValue"in r&&u==null||Mr&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in r&&r.value==null?s="value":s==="download"&&u===!0?u="":a==="translate"&&u==="no"?u=!1:a[0]==="o"&&a[1]==="n"?a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||Gr(r.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":Ir.test(s)&&(s=a):a=s="oninput":i&&Dr.test(s)?s=s.replace(Or,"-$&").toLowerCase():u===null&&(u=void 0),a==="oninput"&&o[s=a]&&(s="oninputCapture"),o[s]=u}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=A(r.children).forEach(function(l){l.props.selected=o.value.indexOf(l.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=A(r.children).forEach(function(l){l.props.selected=o.multiple?o.defaultValue.indexOf(l.props.value)!=-1:o.defaultValue==l.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",Br)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Bt,ut&&ut(e)};var _t=m.__r;m.__r=function(e){_t&&_t(e),Be=e.__c};var at=m.diffed;m.diffed=function(e){at&&at(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),Be=null};var Vt={ReactCurrentDispatcher:{current:{readContext:function(e){return Be.__n[e.__c].props.value},useCallback:xe,useContext:Ue,useDebugValue:Re,useDeferredValue:Fe,useEffect:M,useId:De,useImperativeHandle:Te,useInsertionEffect:He,useLayoutEffect:ee,useMemo:L,useReducer:pe,useRef:z,useState:X,useSyncExternalStore:Me,useTransition:Ae}}},Lr="18.3.1";function jt(e){return F.bind(null,e)}function le(e){return!!e&&e.$$typeof===Bt}function zt(e){return le(e)&&e.type===D}function qt(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Jt(e){return le(e)?dr.apply(null,arguments):e}function Yt(e){return!!e.__k&&(K(null,e),!0)}function Kt(e){return e&&(e.base||e.nodeType===1&&e)||null}var Zt=function(e,t){return e(t)},Qt=function(e,t){return e(t)},Xt=D,er=le,tr={useState:X,useId:De,useReducer:pe,useEffect:M,useLayoutEffect:ee,useInsertionEffect:He,useTransition:Ae,useDeferredValue:Fe,useSyncExternalStore:Me,startTransition:Ge,useRef:z,useImperativeHandle:Te,useMemo:L,useCallback:xe,useContext:Ue,useDebugValue:Re,version:"18.3.1",Children:Ot,render:Lt,hydrate:Wt,unmountComponentAtNode:Yt,createPortal:Ht,createElement:F,createContext:Tt,createFactory:jt,cloneElement:Jt,createRef:St,Fragment:D,isValidElement:le,isElement:er,isFragment:zt,isMemo:qt,findDOMNode:Kt,Component:R,PureComponent:de,memo:Dt,forwardRef:It,flushSync:Qt,unstable_batchedUpdates:Zt,StrictMode:Xt,Suspense:oe,SuspenseList:J,lazy:At,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Vt};const Wr=Object.freeze(Object.defineProperty({__proto__:null,Children:Ot,Component:R,Fragment:D,PureComponent:de,StrictMode:Xt,Suspense:oe,SuspenseList:J,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Vt,cloneElement:Jt,createContext:Tt,createElement:F,createFactory:jt,createPortal:Ht,createRef:St,default:tr,findDOMNode:Kt,flushSync:Qt,forwardRef:It,hydrate:Wt,isElement:er,isFragment:zt,isMemo:qt,isValidElement:le,lazy:At,memo:Dt,render:Lt,startTransition:Ge,unmountComponentAtNode:Yt,unstable_batchedUpdates:Zt,useCallback:xe,useContext:Ue,useDebugValue:Re,useDeferredValue:Fe,useEffect:M,useErrorBoundary:hr,useId:De,useImperativeHandle:Te,useInsertionEffect:He,useLayoutEffect:ee,useMemo:L,useReducer:pe,useRef:z,useState:X,useSyncExternalStore:Me,useTransition:Ae,version:Lr},Symbol.toStringTag,{value:"Module"}));function Vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var rr={exports:{}},nr={};const or=jr(Wr);var ir={exports:{}},sr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q=or;function zr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qr=typeof Object.is=="function"?Object.is:zr,Jr=Q.useState,Yr=Q.useEffect,Kr=Q.useLayoutEffect,Zr=Q.useDebugValue;function Qr(e,t){var r=t(),n=Jr({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return Kr(function(){o.value=r,o.getSnapshot=t,ye(o)&&i({inst:o})},[e,r,t]),Yr(function(){return ye(o)&&i({inst:o}),e(function(){ye(o)&&i({inst:o})})},[e]),Zr(r),r}function ye(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qr(e,r)}catch{return!0}}function Xr(e,t){return t()}var en=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xr:Qr;sr.useSyncExternalStore=Q.useSyncExternalStore!==void 0?Q.useSyncExternalStore:en;ir.exports=sr;var tn=ir.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=or,rn=tn;function nn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:nn,sn=rn.useSyncExternalStore,cn=he.useRef,ln=he.useEffect,un=he.useMemo,_n=he.useDebugValue;nr.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=cn(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=un(function(){function a(d){if(!l){if(l=!0,p=d,d=n(d),o!==void 0&&s.hasValue){var v=s.value;if(o(v,d))return c=v}return c=d}if(v=c,on(p,d))return v;var N=n(d);return o!==void 0&&o(v,N)?(p=d,v):(p=d,c=N)}var l=!1,p,c,h=r===void 0?null:r;return[function(){return a(t())},h===null?void 0:function(){return a(h())}]},[t,r,n,o]);var u=sn(e,i[0],i[1]);return ln(function(){s.hasValue=!0,s.value=u},[u]),_n(u),u};rr.exports=nr;var an=rr.exports;const fn=Vr(an),cr={},{useDebugValue:dn}=tr,{useSyncExternalStoreWithSelector:pn}=fn;let ft=!1;const hn=e=>e;function mn(e,t=hn,r){(cr?"production":void 0)!=="production"&&r&&!ft&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ft=!0);const n=pn(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return dn(n),n}const dt=e=>{(cr?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Pr(e):e,r=(n,o)=>mn(t,n,o);return Object.assign(r,t),r},vn=e=>e?dt(e):dt,$=vn(e=>({gpus:[],selectedGpuId:null,connection:"idle",features:{},sampleIntervalMs:null,statsByGpu:{},procsByGpu:{},lastUpdatedTs:null,version:null,error:null,setGPUs:t=>e(r=>{let n=r.selectedGpuId;return(!n||!t.some(o=>o.id===n))&&(n=t.length>0?t[0].id:null),{gpus:t,selectedGpuId:n}}),setSelectedGpuId:t=>e({selectedGpuId:t}),setConnection:t=>e({connection:t}),setFeatures:t=>e({features:t}),setSampleInterval:t=>e({sampleIntervalMs:t}),updateStats:t=>e(r=>({statsByGpu:{...r.statsByGpu,[t.gpu_id]:t},lastUpdatedTs:Date.now()})),updateProcs:t=>e(r=>({procsByGpu:{...r.procsByGpu,[t.gpu_id]:t},lastUpdatedTs:Date.now()})),clearGpuData:t=>e(r=>{const n={...r.statsByGpu},o={...r.procsByGpu};return delete n[t],delete o[t],{statsByGpu:n,procsByGpu:o}}),setVersion:t=>e({version:t}),setError:t=>e({error:t})})),yn=2e3,bn=1e4,gn=()=>{const e=$(f=>f.gpus),t=$(f=>f.selectedGpuId),r=$(f=>f.statsByGpu),n=$(f=>f.procsByGpu),o=$(f=>f.connection),i=$(f=>f.features),s=$(f=>f.sampleIntervalMs),u=$(f=>f.lastUpdatedTs),a=$(f=>f.version),l=$(f=>f.error),p=$(f=>f.setGPUs),c=$(f=>f.setSelectedGpuId),h=$(f=>f.setConnection),d=$(f=>f.setFeatures),v=$(f=>f.setSampleInterval),N=$(f=>f.updateStats),w=$(f=>f.updateProcs),y=$(f=>f.clearGpuData),b=$(f=>f.setVersion),P=$(f=>f.setError),U=z(null),x=z(null),I=z(null),te=z(null);M(()=>{te.current=t},[t]),M(()=>{let f=!1;return(async()=>{try{const k=await fetch("/api/gpus");if(!k.ok)throw new Error(`HTTP ${k.status}`);const C=await k.json();f||(p(C),P(null))}catch(k){f||(console.error("Failed to load GPU list",k),P("Failed to load GPU list"))}})(),()=>{f=!0}},[p,P]),M(()=>{let f=!1;return(async()=>{try{const k=await fetch("/api/version");if(!k.ok)throw new Error(`HTTP ${k.status}`);const C=await k.json();f||b(C)}catch(k){console.warn("Unable to load version info",k)}})(),()=>{f=!0}},[b]),M(()=>{let f=!1;const S=()=>{I.current!=null&&(window.clearInterval(I.current),I.current=null)},k=()=>{f||(x.current!=null&&window.clearTimeout(x.current),x.current=window.setTimeout(C,yn))},C=()=>{if(!f){x.current!=null&&(window.clearTimeout(x.current),x.current=null),S();try{h("connecting"),P(null);const T=new URL(window.location.href);T.protocol=T.protocol==="https:"?"wss:":"ws:",T.pathname="/ws",T.search="";const B=new WebSocket(T.toString());U.current=B,B.onopen=()=>{h("open");const ue=te.current;ue&&B.send(JSON.stringify({type:"subscribe",gpu_id:ue})),I.current=window.setInterval(()=>{B.readyState===WebSocket.OPEN&&B.send(JSON.stringify({type:"ping"}))},bn)},B.onmessage=ue=>{try{const O=JSON.parse(ue.data);switch(O.type){case"hello":d(O.features??{}),v(O.interval_ms),p(O.gpus??[]);break;case"stats":N(O);break;case"procs":w(O);break;case"error":P(O.message);break;case"pong":break;default:console.warn("Unhandled message",O)}}catch(O){console.error("Failed to decode websocket message",O)}},B.onerror=()=>{h("error")},B.onclose=()=>{S(),h("closed"),k()}}catch(T){console.error("Failed to open websocket",T),h("error"),k()}}};return C(),()=>{f=!0,S(),x.current!=null&&window.clearTimeout(x.current),x.current=null;const T=U.current;U.current=null,T==null||T.close()}},[h,P,d,p,v,w,N]),M(()=>{if(!t)return;const f=U.current;f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"subscribe",gpu_id:t}));let S=!1;return(async()=>{try{const C=await fetch(`/api/gpus/${t}/metrics`);if(C.ok){const T=await C.json();S||N(T)}}catch(C){console.debug("metrics fetch failed",C)}if(i.procs)try{const C=await fetch(`/api/gpus/${t}/procs`);if(C.ok){const T=await C.json();S||w(T)}}catch(C){console.debug("procs fetch failed",C)}})(),()=>{S=!0}},[i.procs,t,w,N]),M(()=>{const f=new Set(e.map(S=>S.id));Object.keys(r).forEach(S=>{f.has(S)||y(S)})},[y,e,r]);const W=L(()=>{if(t)return r[t]},[t,r]),V=L(()=>{if(t)return n[t]},[n,t]);return _("main",{children:[_("header",{children:[_("div",{children:[_("h1",{style:"margin: 0;",children:"amdgpu_top-web"}),_("p",{style:"margin: 0; color: rgba(255,255,255,0.7);",children:"Live AMD GPU telemetry for the web"})]}),_(yr,{gpus:e,selectedGpuId:t,onChange:f=>c(f)})]}),o!=="open"&&_("div",{class:`status-banner ${o==="error"?"error":"info"}`,role:"status",children:[o==="connecting"&&"Connecting to sampler…",o==="error"&&"Connection lost — attempting to reconnect",o==="closed"&&"Disconnected — retrying shortly"]}),l&&_("div",{class:"status-banner warn",role:"alert",children:l}),_(Er,{sample:W}),_(kr,{sample:W}),i.procs?_(Nr,{snapshot:V}):null,_("footer",{children:[s?_("span",{class:"badge",children:["Update interval ",s," ms"]}):null,u?_("span",{children:["Last frame ",Oe(new Date(u).toISOString())]}):_("span",{children:"No telemetry received yet"}),a?_("span",{children:["Version ",a.version," ",a.commit?`(${a.commit.substring(0,7)})`:""]}):null,_("a",{href:"https://github.com/skobkin/amdgputop-web",target:"_blank",rel:"noreferrer",children:"GitHub →"})]})]})},pt=document.getElementById("root");pt&&K(_(gn,{}),pt);
//# sourceMappingURL=index-DC2tVDxB.js.map
